<!DOCTYPE html>
<!-- This site was created in Webflow. https://www.webflow.com -->
<!-- Last Published: Thu May 18 2023 15:06:15 GMT+0000 (Coordinated Universal Time) -->
<html data-wf-domain="www.unfake.co">
    <head>
        <meta charset="utf-8"/>
        <title>UnFake</title>
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <meta content="Webflow" name="generator"/>
        <link href="https://uploads-ssl.webflow.com/645c8d48c65575258da92854/css/unfake.webflow.8aa91ff28.css" rel="stylesheet" type="text/css"/>
        <link href="https://fonts.googleapis.com" rel="preconnect"/>
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous"/>
        <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
        <script type="text/javascript">
            WebFont.load({
                google: {
                    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic", "Roboto Condensed:regular,700"]
                }
            });
        </script>
        <!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif]-->
        <script type="text/javascript">
            !function(o, c) {
                var n = c.documentElement
                  , t = " w-mod-";
                n.className += t + "js",
                ("ontouchstart"in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch")
            }(window, document);
        </script>
        <link href="https://y7v4p6k4.ssl.hwcdn.net/placeholder/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
        <link href="https://uploads-ssl.webflow.com/img/webclip.png" rel="apple-touch-icon"/>


        <style>
            .button-container {
                position: relative;
                width: 100%;
                height: 100%;
            }

            #progress-bar {
                position: absolute;
                left: 0;
                top: 0;
                width: 0%;  /* You can change this value to increase the progress bar */
                height: 100%;
                background-color: #4caf50;
            }

            #loading {
                position: absolute;
                left: 0;
                top: 0;
                right: 0;
                bottom: 0;
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1;  /* Ensure the loading text is above the progress bar */
            }



           /* #hero {
                position: relative;
                /*height: 200px;
            }

            /*#hero img, #video-container {
                position: absolute;
                left: 0;
                top: 0;
            }

            #hero img {
                z-index: 1; /* Ensures the img appears above the video container */
            /*}*/

        </style>

    </head>

    <body class="body">
        <div class="container w-container">

            <h1 class="logo">UnFake</h1>
            <!--img src="https://uploads-ssl.webflow.com/645c8d48c65575258da92854/64663ebd59ccbb4e0a54e9ce_ezgif-4-a36ff4ab2f.gif" loading="lazy" alt=""/-->
            <div id="hero" class="hero-container">
                <img id="logo" src="http://3.24.141.2/images/animtedlogotransprent.gif" loading="lazy" alt=""/>
                <div id="video-container"></div>
            </div>

            <div class="sign-up-form w-form">

                <div name="wf-form-signup-form" data-name="Signup Form" id="email-form" method="get" class="w-clearfix">
                    <input  id="youtube-url" type="text" placeholder="Enter YouTube URL" value="https://www.youtube.com/watch?v=NoXLu9Rz70g" class="field w-input" />
                    <button id="submitButton" class="button w-button" onclick="sendData()">
                            <div class="button-container">
                                <div id="progress-bar" style="width: 0%; height: 24px; background-color: #4caf50;"></div>
                            <div id="loading">Submit</div>
                            </div>
                        
                    </button>
                </div>

                
                <p id="name"></p>
                <p id="data"></p>
                <div id="log"></div>

                <div id="history"></div>

                <div class="success-message w-form-done">
                    <p>Thanks! You have been added to our beta list.Â </p>
                    <p class="spread-word">Help spread the word!</p>
                    <div class="social-widget-wrapper w-clearfix">
                        <div class="social-widget w-widget w-widget-twitter">
                            <iframe title="Twitter Tweet Button" allowtransparency="true" frameborder="0" scrolling="no" src="//platform.twitter.com/widgets/tweet_button.html#counturl=webflow.com&amp;dnt=true&amp;height=20&amp;show_count=horizontal&amp;size=m&amp;text=Check%20out%20this%20site&amp;url=http%3A%2F%2Fwebflow.com&amp;width=73" style="border: none; height: 20px; overflow: hidden; width: 73px;"></iframe>
                            <div class="w-widget-twitter-count-shim" aria-hidden="true">
                                <div class="w-widget-twitter-count-inner">...</div>
                            </div>
                        </div>
                        <div class="social-widget w-widget w-widget-facebook">
                            <iframe title="Facebook Like Button" src="//www.facebook.com/plugins/like.php?href=https%3A%2F%2Ffacebook.com%2Fwebflow&amp;layout=button_count&amp;locale=en_US&amp;action=like&amp;show_faces=false&amp;share=false" scrolling="no" frameborder="0" allowtransparency="true" style="border: none; overflow: hidden; width: 90px; height: 20px;"></iframe>
                        </div>
                    </div>
                </div>

                <div class="error-message w-form-fail">
                    <p>Oops! Something went wrong while submitting the form. :(</p>
                </div>
            </div>

        </div>

        <div class="footer-section wf-section"></div>
        <!--script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=645c8d48c65575258da92854" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src="https://uploads-ssl.webflow.com/645c8d48c65575258da92854/js/webflow.365882f5d.js" type="text/javascript"></script-->
        <script src="loadingMessages.js"></script>
    <script>
        // Define global variables
        const heroElement = document.getElementById("hero");
        const logoElement = document.getElementById("logo");
        const dataElement = document.getElementById("data");
        const logElement = document.getElementById("log");
        const historyElement = document.getElementById("history");
        const loadingElement = document.getElementById("loading");
        const progressBarElement = document.getElementById("progress-bar");
        const submitButton = document.getElementById('submitButton');
        let youtubeIframe = {};
        let progressInterval = {};
        let loadingMessage = new LoadingMessage(logElement);


        let youtubeVideos = [
            "https://www.youtube.com/watch?v=NoXLu9Rz70g",
            "https://www.youtube.com/watch?v=2tNTJhJmOkU"
            ]

        // Define asynchronous function to send data
        async function sendData() {
            // Get YouTube URL and ID
            const urlInput = document.getElementById('youtube-url');
            const youtubeUrl = urlInput.value;
            const youtubeId = new URLSearchParams(new URL(youtubeUrl).search).get('v');

            // Disable the submit button
            submitButton.disabled = true;
            
            // Create an iframe for the YouTube video
            const videoContainer = document.getElementById('video-container');
            youtubeIframe = document.createElement('iframe');
            youtubeIframe.src = `https://www.youtube.com/embed/${youtubeId}`;
            youtubeIframe.width = '560';
            youtubeIframe.height = '315';
            youtubeIframe.frameborder = '0';
            youtubeIframe.allowfullscreen = true;
            videoContainer.appendChild(youtubeIframe);
            logoElement.style.display = "none";

            // Update data element text
            dataElement.innerText = "";
            loadingElement.innerText = "";

            // Set interval for progress updates
            progressInterval = setInterval(async function(){
                try {
                    // Make POST request to updateUnFake
                    const response = await fetch('http://3.24.141.2:3000/updateUnFake', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ youtubeId: youtubeId }),
                    });
                    
                    // Parse response data
                    const data = await response.json();

                    // Update progress bar
                    loadingElement.innerText = data.status + '%';
                    progressBarElement.style.width = data.status + '%';

                    // If analysis is finished, handle response
                    if(data.finished) {
                        loadingMessage.processing();
                        handleResponse(data);
                    }else if(data.progress == 100) {
                        loadingMessage.processing();
                    }else {
                        loadingMessage.downloading();
                    }

                } catch(error) {
                    // If an error occurs, log it and update loading element
                    console.error("Error fetching update: ", error);
                    loadingElement.innerText = "Server unresponsive...";
                    clearInterval(progressInterval);
                }
            }, 1000);  // Interval of 2 seconds

            //loadingMessage = new LoadingMessage(logElement);
            console.log("loadingMessage:" + loadingMessage);
            loadingMessage.start();

            // Make POST request to startUnFake
            const response = await fetch('http://3.24.141.2:3000/startUnFake', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ youtubeId: youtubeId }),
            });
            
            // Parse response data and handle it
            const data = await response.json();
            handleResponse(data);
        }

        // Define function to handle response data
        function handleResponse(data) {
            loadingMessage.stop();
            clearInterval(progressInterval);

            document.getElementById("name").innerText = "";
            document.getElementById("data").innerText = "";

            loadingElement.innerText = "Analyzing finished.";
            submitButton.disabled = false; 
            logoElement.style.display = "block";

            let resultsDiv = document.createElement('div');
            let resultsName = document.createElement('p');
            resultsName.innerText = data.videoName;
            let resultsData = document.createElement('p');
            resultsData.innerText = data.generatedText;

            resultsDiv.appendChild(resultsName);
            resultsDiv.appendChild(youtubeIframe);
            resultsDiv.appendChild(resultsData);

            historyElement.prepend(resultsDiv);
        }
    </script>
    </body>
</html>